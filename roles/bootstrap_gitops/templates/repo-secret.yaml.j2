---
apiVersion: v1
kind: Secret
metadata:
  name: {{ argocd.git.name }}
  namespace: "{{ argocd.instance.namespace }}"
  labels:
    argocd.argoproj.io/secret-type: repository
  annotations:
    managed-by: argocd.argoproj.io
type: Opaque
data:
  url: "{{ argocd.git.repo | b64encode }}"
  username: "{{ argocd.git.username | default('not_used') | b64encode }}"
  password: "{{ argocd.git.password | b64encode }}"
  type: "{{ 'git' | b64encode }}"
  forceHttpBasicAuth: {{ argocd.git.forceHttpBasicAuth | default(false) | b64encode }}
  insecure: {{ argocd.git.insecure | default(false) | b64encode }}
