---
argocd:
  placement:
    node_selector:
      node-role.kubernetes.io/infra: ""
    tolerations:
      - effect: NoSchedule
        key: node-role.kubernetes.io/infra
        operator: Exists
      - effect: NoExecute
        key: node-role.kubernetes.io/infra
        operator: Exists
  operator:
    channel: gitops-1.16
    install_plan_approval: Automatic
    metadata:
      name: openshift-gitops-operator
      namespace: openshift-gitops-operator
    subscription:
      name: openshift-gitops-operator
      source: redhat-operators
      source_namespace: openshift-marketplace
      # Optional: Pin to specific CSV version. If empty/undefined, uses latest from channel
      starting_csv: openshift-gitops-operators.v1.16.0
      # Example: starting_csv: openshift-gitops-operator.v1.16.0

  # Instance configuration
  instance:
    name: openshift-gitops
    namespace: openshift-gitops
    ha_enabled: false
    rbac_policy: |
      g, system:cluster-admins, role:admin
      g, cluster-admins, role:admin
    rbac_scopes: groups  # Optional, defaults to 'groups'

  # AppofApps configuration
  sync:
    prune: true
    self_heal: true

  # Git repository configuration
  git:
    repo: https://gitlab.example/openshift/openshift-configurations.git
    path: clusters/ocp-cluster/appofapps
    branch: main
