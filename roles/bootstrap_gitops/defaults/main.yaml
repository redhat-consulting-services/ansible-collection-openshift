---
argocd:
  placement:
    node_selector:
      node-role.kubernetes.io/infra: ""
    tolerations:
      - effect: NoSchedule
        key: node-role.kubernetes.io/infra
        operator: Exists
      - effect: NoExecute
        key: node-role.kubernetes.io/infra
        operator: Exists
  operator:
    channel: gitops-1.16
    install_plan_approval: Automatic
    metadata:
      name: openshift-gitops-operator
      namespace: openshift-gitops-operator
    subscription:
      name: openshift-gitops-operator
      source: redhat-operators
      source_namespace: openshift-marketplace
      # Optional: Pin to specific CSV version. If empty/undefined, uses latest from channel
      starting_csv: openshift-gitops-operators.v1.16.0
      # Example: starting_csv: openshift-gitops-operator.v1.16.0

  # Instance configuration
  instance:
    name: openshift-gitops
    namespace: openshift-gitops
    ha_enabled: false
    host: ""
    rbac_policy: |
      g, system:cluster-admins, role:admin
      g, cluster-admins, role:admin
    rbac_scopes: groups  # Optional, defaults to 'groups'

app_of_apps:
  # enable or disable the App of Apps application definition creation
  enabled: true
  # name of the App of Apps application
  name: app-of-apps
  # project for the App of Apps application
  project: default
  # source defines where to find the App of Apps manifests
  source:
    # repo URL for the App of Apps application
    repo: https://gitlab.example/openshift/openshift-configurations.git
    # target_revision for the App of Apps application (e.g., branch, tag, commit)
    target_revision: main
    # path within the repo for the App of Apps application
    path: overlays/app-of-apps
  sync_policy:
    automated:
      prune: true
      selfHeal: true
    sync_options:
      - Validate=false

# repositories is a list of git/helm repositories to add to ArgoCD
repositories: []
  # - name: app-of-apps
  #   type: git
  #   url: https://gitlab.example/openshift/openshift-configurations.git
  #   branch: main
  #   enableOCI: false
  #   authentication:
  #     username: ""
  #     password: ""
  #   insecure: false
  #   forceHttpBasicAuth: false

# certificate authority bundle for repository trust
ca_bundle:
  # name of the config map to create for user CA bundle
  name: user-ca-bundle
  # the key within the config map that contains the CA bundle data
  ca_key: ca-bundle.crt
